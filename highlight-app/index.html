<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Highlight App - L√†m n·ªïi v√πng ·∫£nh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .selection-area {
        border: 2px solid #3b82f6;
        position: absolute;
        pointer-events: none;
        border-radius: 10px;
        z-index: 10;
      }
      .canvas-container {
        position: relative;
        display: inline-block;
        max-width: 100%;
        max-height: 80vh;
      }
      .toolbar {
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(8px);
        border-radius: 12px;
        padding: 16px;
        position: sticky;
        top: 20px;
        z-index: 20;
      }
      .color-swatch {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        border: 2px solid transparent;
      }
      .color-swatch.active {
        border-color: #3b82f6;
        transform: scale(1.15);
        box-shadow: 0 0 10px #3b82f6;
      }
      .drop-zone {
        border: 2px dashed #cbd5e1;
        border-radius: 1rem;
        transition: all 0.3s;
      }
      .drop-zone.dragover {
        border-color: #3b82f6;
        background-color: rgba(59, 130, 246, 0.1);
      }
      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        background: transparent;
        cursor: pointer;
      }
      input[type="range"]::-webkit-slider-runnable-track {
        background: #475569;
        height: 6px;
        border-radius: 3px;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        margin-top: -7px;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #3b82f6;
        cursor: pointer;
        border: 3px solid #f1f5f9;
        transition: transform 0.2s;
      }
      input[type="range"]:hover::-webkit-slider-thumb {
        transform: scale(1.1);
      }
    </style>
  </head>
  <body class="bg-slate-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-slate-800 mb-2">üéØ Highlight App</h1>
        <p class="text-slate-600 text-lg">
          L√†m n·ªïi b·∫≠t v√πng quan tr·ªçng tr√™n ·∫£nh c·ªßa b·∫°n m·ªôt c√°ch d·ªÖ d√†ng
        </p>
      </header>

      <!-- Upload Zone -->
      <div
        id="uploadZone"
        class="drop-zone bg-white/60 backdrop-blur-sm p-8 text-center mb-6 cursor-pointer rounded-2xl transition-all duration-300 hover:border-blue-500 hover:bg-white"
      >
        <div class="space-y-4">
          <div class="text-6xl">üì∏</div>
          <div>
            <p class="text-lg font-medium text-slate-700 mb-2">
              K√©o th·∫£ ·∫£nh v√†o ƒë√¢y ho·∫∑c
              <span class="text-blue-600 font-semibold">nh·∫•n ƒë·ªÉ ch·ªçn</span>
            </p>
            <p class="text-sm text-slate-500">
              H·ªó tr·ª£ PNG, JPEG, WebP (t·ªëi ƒëa 30MP)
            </p>
          </div>
          <input type="file" id="fileInput" accept="image/*" class="hidden" />
        </div>
      </div>

      <!-- Main Content -->
      <div id="mainContent" class="hidden">
        <div class="grid lg:grid-cols-12 gap-8">
          <!-- Toolbar -->
          <div class="lg:col-span-4 xl:col-span-3">
            <div
              class="toolbar bg-slate-900/80 backdrop-blur-lg border border-slate-700/50 rounded-2xl p-5 space-y-6 sticky top-6"
            >
              <!-- Color Picker -->
              <div class="border-b border-slate-700 pb-6">
                <h3
                  class="font-medium mb-4 text-sm uppercase tracking-wider text-slate-400"
                >
                  M√†u s·∫Øc
                </h3>
                <div class="flex justify-between gap-2 mb-4">
                  <div
                    class="color-swatch active"
                    style="background-color: #3b82f6"
                    data-color="#3b82f6"
                  ></div>
                  <div
                    class="color-swatch"
                    style="background-color: #ef4444"
                    data-color="#ef4444"
                  ></div>
                  <div
                    class="color-swatch"
                    style="background-color: #22c55e"
                    data-color="#22c55e"
                  ></div>
                  <div
                    class="color-swatch"
                    style="background-color: #f59e0b"
                    data-color="#f59e0b"
                  ></div>
                  <div
                    class="color-swatch"
                    style="background-color: #8b5cf6"
                    data-color="#8b5cf6"
                  ></div>
                </div>
                <input
                  type="color"
                  id="customColor"
                  value="#3b82f6"
                  class="w-full h-10 rounded-lg cursor-pointer border-0"
                />
              </div>

              <!-- Sliders -->
              <div class="space-y-5 border-b border-slate-700 pb-6">
                <h3
                  class="font-medium mb-4 text-sm uppercase tracking-wider text-slate-400"
                >
                  Hi·ªáu ·ª©ng
                </h3>
                <!-- Darkness & Blur -->
                <div class="space-y-5">
                  <div>
                    <label
                      class="block text-slate-300 text-sm font-medium mb-2"
                    >
                      ƒê·ªô t·ªëi n·ªÅn: <span id="darknessValue">0.7</span>
                    </label>
                    <input
                      type="range"
                      id="darknessSlider"
                      min="0"
                      max="1"
                      step="0.05"
                      value="0.7"
                      class="w-full"
                    />
                  </div>
                  <div>
                    <label
                      class="block text-slate-300 text-sm font-medium mb-2"
                    >
                      ƒê·ªô m·ªù: <span id="blurValue">0</span>px
                    </label>
                    <input
                      type="range"
                      id="blurSlider"
                      min="0"
                      max="10"
                      step="0.5"
                      value="0"
                      class="w-full"
                    />
                  </div>
                </div>
              </div>

              <div class="space-y-5 border-b border-slate-700 pb-6">
                <h3
                  class="font-medium mb-4 text-sm uppercase tracking-wider text-slate-400"
                >
                  Khung vi·ªÅn
                </h3>
                <!-- Border Width & Radius -->
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label
                      class="block text-slate-300 text-sm font-medium mb-2"
                    >
                      ƒê·ªô d√†y: <span id="borderWidthValue">2</span>px
                    </label>
                    <input
                      type="range"
                      id="borderWidthSlider"
                      min="0"
                      max="10"
                      step="1"
                      value="2"
                      class="w-full"
                    />
                  </div>
                  <div>
                    <label
                      class="block text-slate-300 text-sm font-medium mb-2"
                    >
                      Bo g√≥c: <span id="borderRadiusValue">10</span>px
                    </label>
                    <input
                      type="range"
                      id="borderRadiusSlider"
                      min="0"
                      max="50"
                      step="1"
                      value="10"
                      class="w-full"
                    />
                  </div>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="pt-2 space-y-4">
                <div class="grid grid-cols-3 gap-2">
                  <button
                    id="undoBtn"
                    class="w-full flex items-center justify-center gap-2 bg-slate-700 hover:bg-slate-600 text-white py-2 px-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled
                    title="Ho√†n t√°c"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-undo-2"
                    >
                      <path d="M9 14 4 9l5-5" />
                      <path d="M4 9h10.5a8.5 8.5 0 1 1-8.5 8.5" />
                    </svg>
                  </button>
                  <button
                    id="redoBtn"
                    class="w-full flex items-center justify-center gap-2 bg-slate-700 hover:bg-slate-600 text-white py-2 px-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled
                    title="L√†m l·∫°i"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-redo-2"
                    >
                      <path d="m15 14 5-5-5-5" />
                      <path d="M20 9H9.5A8.5 8.5 0 0 0 1 17.5" />
                    </svg>
                  </button>
                  <button
                    id="resetBtn"
                    class="w-full flex items-center justify-center gap-2 bg-slate-700 hover:bg-slate-600 text-white py-2 px-3 rounded-lg transition-colors"
                    title="Reset"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-rotate-cw"
                    >
                      <path d="M21 2v6h-6" />
                      <path
                        d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"
                      />
                    </svg>
                  </button>
                </div>
                <button
                  id="exportBtn"
                  class="w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-download"
                  >
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="7 10 12 15 17 10" />
                    <line x1="12" x2="12" y1="15" y2="3" />
                  </svg>
                  Xu·∫•t ·∫£nh (PNG)
                </button>
              </div>
            </div>
          </div>

          <!-- Canvas Area -->
          <div class="lg:col-span-8 xl:col-span-9">
            <div
              class="bg-white/60 backdrop-blur-sm rounded-2xl shadow-sm p-4 border border-slate-200/80"
            >
              <div class="canvas-container mx-auto" id="canvasContainer">
                <canvas
                  id="canvas"
                  class="max-w-full max-h-[80vh] object-contain rounded-lg cursor-crosshair"
                ></canvas>
                <div id="selectionArea" class="selection-area hidden"></div>
              </div>
              <div
                class="mt-4 text-center text-sm text-slate-500"
                id="imageInfo"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Loading -->
      <div
        id="loadingOverlay"
        class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"
      >
        <div
          class="bg-white/80 backdrop-blur-lg p-6 rounded-2xl shadow-xl text-center"
        >
          <div
            class="animate-spin w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"
          ></div>
          <p class="text-slate-700 font-medium">ƒêang x·ª≠ l√Ω ·∫£nh...</p>
        </div>
      </div>

      <!-- Warning Modal -->
      <div
        id="warningModal"
        class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"
      >
        <div
          class="bg-white/80 backdrop-blur-lg p-8 rounded-2xl shadow-xl max-w-md mx-4"
        >
          <div class="text-center">
            <div class="text-5xl mb-4">‚ö†Ô∏è</div>
            <h3 class="text-xl font-semibold mb-2 text-slate-800">
              ·∫¢nh c√≥ k√≠ch th∆∞·ªõc l·ªõn
            </h3>
            <p class="text-slate-600 mb-6">
              ·∫¢nh c·ªßa b·∫°n c√≥ ƒë·ªô ph√¢n gi·∫£i cao (&gt;30MP). ·ª®ng d·ª•ng s·∫Ω d√πng b·∫£n
              xem tr∆∞·ªõc ƒë·ªÉ thao t√°c nh∆∞ng v·∫´n xu·∫•t ·∫£nh ·ªü ƒë·ªô ph√¢n gi·∫£i g·ªëc.
            </p>
            <button
              id="continueBtn"
              class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-2.5 rounded-lg font-semibold"
            >
              ƒê√£ hi·ªÉu, ti·∫øp t·ª•c
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
